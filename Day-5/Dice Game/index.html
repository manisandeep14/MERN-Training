<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="style.css" />
  <title>Pig Game</title>
</head>

<body>
  <main style="display: flex">
    <section class="player player--0">
      <h2 class="name" id="name--0">Player 0</h2>
      <p class="score" id="score--0">0</p>
      <div class="current">
        <p class="current-label">Current</p>
        <p class="current-score" id="current--0">0</p>
      </div>
    </section>
    <section class="player player--1">
      <h2 class="name" id="name--1">Player 1</h2>
      <p class="score" id="score--1">0</p>
      <div class="current">
        <p class="current-label">Current</p>
        <p class="current-score" id="current--1">0</p>
      </div>
    </section>

    <img src="dice-5.png" alt="Playing dice" class="dice" />
    <button class="btn btn--new" id="btn-scale">ðŸ”„ New game</button>
    <button class="btn btn--roll" id="btn-scale">ðŸŽ² Roll dice</button>
    <button class="btn btn--hold" id="btn-scale">ðŸ“¥ Hold</button>
    <h5 class="btn-clone declare--win"></h5>
  </main>

  <!-- scripting is starts from here -->
  <script>
    let rollDice = document.querySelector('.btn--roll')
    let hollDice = document.querySelector('.btn--hold')
    let newGame = document.querySelector('.btn--new')
    let diceImg = document.querySelector('.dice')
    let p0Score = document.querySelector('#current--0')
    let p1Score = document.querySelector('#current--1')
    let currentPlayer0 = document.querySelector('#score--0')
    let currentPlayer1 = document.querySelector('#score--1')
    let winner = document.querySelector('.declare--win')
    let currentValue = parseInt(currentPlayer0.textContent)
    let currentValue1 = parseInt(currentPlayer1.textContent)
    let currentScore0 = Number(p0Score.textContent)
    let currentScore1 = Number(p1Score.textContent)
    let currentPlayer = 0;
    let winningScore = 20;


    //console.log(currentScore0)
    rollDice.addEventListener('click', () => {
      const diceDigit = Math.floor(Math.random() * 6) + 1
      //console.log(diceDigit)
      diceImg.getAttribute('src')
      //console.log(diceImg)
      diceImg.setAttribute('src', `dice-${diceDigit}.png`)
      if (currentPlayer === 0) {
        passToPlayer0(diceDigit);
      }
      else {
        passToplayer1(diceDigit);
      }
    })

    newGame.addEventListener('click', () => {
      rollDice.disabled = false;
      hollDice.disabled = false;
      winner.hidden = true;
      currentPlayer1.textContent = 0
      currentPlayer0.textContent = 0
      p1Score.textContent = 0
      p0Score.textContent = 0
      currentValue = 0
      currentValue1 = 0
      currentScore0 = 0
      currentScore1 = 0
      currentPlayer = 0
    })


    hollDice.addEventListener('click', () => {
      if (currentPlayer === 0) {
        let currentScore0 = Number(p0Score.textContent)
        currentValue += currentScore0
        currentPlayer0.textContent = currentValue
        p0Score.textContent = 0
        GameOver(currentValue, currentPlayer)
        currentPlayer = 1
      }
      else {
        let currentScore1 = Number(p1Score.textContent)
        currentValue1 += currentScore1
        currentPlayer1.textContent = currentValue1
        p1Score.textContent = 0
        GameOver(currentValue1, currentPlayer)
        currentPlayer = 0
      }
    })



    function passToPlayer0(diceDigit) {
      if (diceDigit === 1) {
        // console.log("checking",currentPlayer0.textContent + 4)i have to take another variable to parse the text content and adding the value to it and again displaying it to the same.
        // let currentValue = parseInt(currentPlayer0.textContent)
        // currentValue += currentScore0 
        //  // changing the code to make the game difficult if 1 appears automatically scores will be zero.
        // incase u want to change the functionality uncommetnt the above line.
        currentValue = 0
        currentPlayer0.textContent = currentValue
        currentScore0 = 0
        p0Score = 0
        p0Score.textContent = currentScore0
        console.log("p0score", currentScore0)
        //console.log(currentScore0)
        //console.log(winningScore)

        GameOver(currentValue, currentPlayer)

        currentPlayer = 1;
      }
      else {
        currentScore0 += diceDigit
        console.log("p0score", currentScore0)
        p0Score.textContent = currentScore0
        GameOver(currentScore0, currentPlayer)
      }
    }



    function passToplayer1(diceDigit) {
      if (diceDigit === 1) {
        //currentValue1 += currentScore1
        currentValue1 = 0
        currentPlayer1.textContent = currentValue1
        currentScore1 = 0
        p1Score = 0
        p1Score.textContent = currentScore1
        console.log("p1score", currentScore1)
        GameOver(currentValue1, currentPlayer1)
        currentPlayer = 0;
      }
      else {
        currentScore1 += diceDigit
        console.log("p1score", currentScore1)
        p1Score.textContent = currentScore1
        GameOver(currentScore1, currentPlayer1)
      }
    }


    function GameOver(currentvalues, currentPlayer) {
      if (currentvalues >= winningScore) {
        winner.hidden = false;
        winner.textContent = `Player${currentPlayer} Wins`
        rollDice.disabled = true;
        hollDice.disabled = true;
      }
    }


  </script>
</body>

</html>